<app-floating-modal [floatingModalId]="addNumberFloatingModalId" title="Add Mobile Number">
  <div class="w-80 flex flex-col">
    <label class="block text-sm font-medium text-gray-900 dark:text-white"> Phone Number:</label>
    <div class="relative">
      <div class="absolute inset-y-0 start-0 top-0 flex items-center ps-3.5 pointer-events-none"
        style="background: #f9fafb;">
        <i class="fa-solid fa-phone"></i>
      </div>
      <app-input [control]="mobilenumber" class="ml-5" name="mobilenumber" type="tel" autocomplete="mobilenumber"
        placeholder="Mobile Number"></app-input>
      <p></p>
    </div>
    <button [disabled]="false" type="submit" class="w-4/5 text-white py-2 sm:py-3 rounded bg-themeblue-900 w-full mt-6">
      <app-dot-wave-loader colorCode="#FFFFFF" class="flex justify-center items-center my-1 mt-1.5"
        *ngIf="false ; else addText" />
      <ng-template #addText> Add </ng-template>
    </button>
  </div>
</app-floating-modal>

<!-- Profile information component -->
<div class="p-6 gap-4 flex flex-col mb-5">
  <div class="bg-white p-6 border border-gray-200 card">
    <div class="flex justify-between items-center mb-4">
      <h1 class="text-xl font-bold text-black">Profile</h1>
      <div *ngIf="!isEditable;" (click)="enableEdit()"
        class="rounded-full hover:bg-themeblue-200 hover:text-themeblue-400 h-11 w-11 flex justify-center items-center">
        <i class="fa-solid fa-pen-to-square text-themeblue-900 text-lg"></i>
      </div>
      <div *ngIf="isEditable" class="flex gap-2">
        <button [disabled]="false" type="submit" class="text-white py-1.5 sm:py-1.5 rounded bg-themeblue-900 px-4">
          <app-dot-wave-loader colorCode="#FFFFFF" class="flex justify-center items-center my-1 mt-1.5"
            *ngIf="false ; else saveText" />
          <ng-template #saveText> Save </ng-template>
        </button>
        <button (click)="disableEdit($event)" class="text-danger py-1.5 sm:py-1.5 px-4 rounded bg-red-100">
          Cancel
        </button>
      </div>
    </div>
    <div class="flex justify-center sm:justify-start sm:flex-nowrap flex-wrap items-center mb-6">
      <div class="mr-4 mb-2 sm:ml-0 ">
        <img *ngIf="user.image; else charactorImage" [src]="user.image" [alt]="this.user.name"
          class="w-16 h-16 rounded-full">
        <ng-template #charactorImage>
          <div class="w-16 h-16 rounded-full flex justify-center items-center" style="background: #666887;">
            <p class="text-white text-3xl font-semibold">{{user.name![0].toUpperCase()}}
            </p>
          </div>
        </ng-template>
      </div>
      <div>
        <p class="font-bold text-themeblue-900 text-xl">{{user.name}}</p>
        <p>{{user.email}}</p>
      </div>
    </div>
    <div class="grid sm:grid-cols-2 grid-cols-1 gap-4 sm:w-[60%]">
      <div>
        <p class="text-gray-700 font-semibold">Full Name</p>
        <input #nameField type="text" [formControl]="name" class="text-gray-800 bg-white duration-200"
          [ngClass]="{'border rounded px-4 py-2 w-11/12 focus:border-themeblue-400':isEditable}">
      </div>
      <div class="w-full">
        <p class="text-gray-700 font-semibold">Gender</p>
        <app-floating-dropdown [floatingDropdownId]="genderDropDownId" class="float-left">
          <button floating-dropdown-title (click)="openFloatingDropdown($event, genderDropDownId)"
            class="floating-dropdown-btn text-gray-800 bg-white duration-200 text-base flex justify-between items-center gap-4"  [ngClass]="{'border rounded px-4 pr-5 py-2 xs:w-52 focus:border-themeblue-400':isEditable}">
            {{gender.value}} <i class="fa-solid fa-caret-down text-themeblue-900 floating-dropdown-btn" [ngClass]="{'hidden':!isEditable}"></i>
          </button>
          <div floating-dropdown-menu
            class="absolute top-9 z-50 transition-[margin,opacity] duration-900 mt-2 bg-white border border-themeblue-400 rounded p-2 mr-5 w-fit left-0 xs:min-w-52">
            <div *ngFor="let genderOpt of genderOptions"
            (click)="changeGander(genderOpt)"
            [ngClass]="{'text-themeblue-400 bg-themeblue-200': gender.value == genderOpt }"
              class="cursor-pointer flex items-center py-2 px-3 rounded-md text-sm text-gray-800 hover:bg-gray-500 hover:bg-themeblue-200 whitespace-nowrap">
              {{genderOpt}}
            </div>
          </div>
        </app-floating-dropdown>
      </div>
    </div>
  </div>
  <!-- email component -->
  <app-profile-modal title="Email Addresses" subTitle="
      You can use the following email addresses to sign in to your account 
      and also to reset your password if you ever forget it.">
    <div>
      <app-profile-model-footer [email]="user.email" timespan="1 year ago" icon="fa-envelope">
      </app-profile-model-footer>
    </div>
  </app-profile-modal>

  <!-- mobile component -->
  <app-profile-modal title="Mobile Numbers"
    subTitle="View and manage all of the mobile numbers associated with your account.">
    <div *ngIf="!user.phoneNumber; else mobileAvailable">
      <div class="flex justify-center">
        <a
          class="relative rounded-lg px-5 py-1.5 overflow-hidden group bg-themeblue-900 relative hover:bg-gradient-to-r hover:from-bg-themeblue-900 hover:to-bg-themeblue-800 text-white hover:ring-2  hover:bg-themeblue-900 transition-all ease-out duration-300">
          <span
            class="absolute right-0 w-8 h-32 -mt-12 transition-all duration-1000 transform translate-x-12 bg-white opacity-10 rotate-12 group-hover:-translate-x-40 ease"></span>
          <span class="relative text-l"><button (click)="openPhoneNumberForm($event)">Add Mobile
              Number</button></span>
        </a>
      </div>
    </div>
    <ng-template #mobileAvailable>
      <app-profile-model-footer [email]="user.phoneNumber!" timespan="1 year ago" icon='fa-phone'>
      </app-profile-model-footer>
    </ng-template>
  </app-profile-modal>

</div>